<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="utf-8" />
<meta http-equiv="X-UA-Compatible" content="IE=edge"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>tristangriffiths.net | tristangriffiths.net</title>
<meta name="description" content=""/>
<meta name="keywords" content=""/>
<meta name="author" content="">
<link href="/rss" rel="alternate" type="application/rss+xml" title="tristangriffiths.net" />
<meta property="og:type" content="">
<meta property="og:locale" content="en_AU">
<meta property="og:site_name" content="tristangriffiths.net">
<meta property="og:title" content="VM Processor Configuration and SQL Server Express with Skype for Business (Lync)">
<meta property="og:url" content="">

  <meta property="og:description" content="">



  <meta property="article:published_time" content="2015-09-01T00:00:00+10:00">


<link rel="canonical" href="">


<!-- Bootstrap CSS -->
<link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap.min.css">
<link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap-theme.min.css">
<!-- Font Awesome CSS -->
<link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css">
<!-- Purdy Fonts CSS -->
<link href="//fonts.googleapis.com/css?family=Lora:400,700,400italic,700italic" rel="stylesheet" type="text/css">
<link href="//fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800" rel="stylesheet" type="text/css">
<!-- Site -->
<link href="/assets/css/site.min.css" rel="stylesheet" type="text/css">
<!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
<!--[if lt IE 9]>
  <script src="//oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
  <script src="//oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
	<!-- Navigation -->
	<nav class="navbar navbar-default navbar-custom navbar-fixed-top">
		<div class="container-fluid">
    <!-- Brand and toggle get grouped for better mobile display -->
    <div class="navbar-header page-scroll">
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="/">tristangriffiths.net</a>
    </div>
    <!-- Collect the nav links, forms, and other content for toggling -->
    <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
        <ul class="nav navbar-nav navbar-right">
            <li>
                <a href="/">Home</a>
            </li>
            <li>
                <a href="/about">About</a>
            </li>
        </ul>
    </div>
    <!-- /.navbar-collapse -->
</div>
<!-- /.container -->
	</nav>
	
	<!-- Page Header -->
<header class="intro-header" style="background-image: url('/assets/img/vspherecores.png')">
    <div class="container">
        <div class="row">
            <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
                <div class="post-heading">
                    <h1 id="title">VM Processor Configuration and SQL Server Express with Skype for Business (Lync)</h1>
                    <h2 class="subheading">A lesson in Microsoft licensing</h2>
                    <span class="meta">Posted on September 01, 2015</span>
                </div>
            </div>
        </div>
    </div>
</header>

<!-- Post Content -->
<article itemscope itemtype="http://schema.org/BlogPosting">
    <meta itemprop="name" content="VM Processor Configuration and SQL Server Express with Skype for Business (Lync)" />
    <meta itemprop="headline" content="A lesson in Microsoft licensing" />
    <meta itemprop="datepublished" content="September 01, 2015">
    
    <meta itemprop="image" content="/assets/img/vspherecores.png" />	
    <div class="container">
        <div class="row">
            <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1" itemprop="articleBody">
                <h3 id="problem">Problem</h3>
<p>While investigating an SQL issue with a customers Lync environment, discovered the following in the local SQL Express instance error logs:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>SQL Server detected 8 sockets with 1 cores per socket and 1 logical processors per socket, 8 total logical processors; using 1 logical processors based on SQL Server licensing. This is an informational message; no user action is required.
</code></pre></div></div>

<p>Hmmm. That’s a little strange. You’re only using a single processor on a 8 core virtual machine.</p>

<p>Quick check of the capacity limits of SQL Server Express:</p>

<p><a href="https://msdn.microsoft.com/en-AU/library/ms143760(v=sql.120).aspx" title="https://msdn.microsoft.com/en-AU/library/ms143760(v=sql.120).aspx">https://msdn.microsoft.com/en-AU/library/ms143760(v=sql.120).aspx</a></p>

<p>Little bit confusing but I read “Limited to lesser of 1 Socket or 4 cores” to mean that SQL Server Express is limited to a single socket and no more than 4 cores.</p>

<p>This customer had configured their VMware guest as a single socket per core based on this advice:</p>

<p><a href="https://blogs.vmware.com/vsphere/2013/10/does-corespersocket-affect-performance.html" title="https://blogs.vmware.com/vsphere/2013/10/does-corespersocket-affect-performance.html">https://blogs.vmware.com/vsphere/2013/10/does-corespersocket-affect-performance.html</a></p>

<p>Not usually a bad idea except when licensing restrictions require a different configuration.</p>

<h3 id="solution">Solution</h3>
<p>After a scheduled outage and some reconfiguration, our SQL Server Express instances have access to the expected number of cores:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>SQL Server detected 2 sockets with 4 cores per socket and 4 logical processors per socket, 8 total logical processors; using 4 logical processors based on SQL Server licensing. This is an informational message; no user action is required.
</code></pre></div></div>

<p>Customer reports presence is being updated normally and SQL errors appear to have disappeared.</p>

            </div>
        </div>
    </div>
</article>

	<!-- Footer -->
	<footer>
		<div class="container">
	<div class="row">
		<div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
			<ul class="list-inline text-center">
				<li>
					<a href="https://au.linkedin.com/in/trgriffiths">
						<span class="fa-stack fa-lg">
							<i class="fa fa-circle fa-stack-2x"></i>
							<i class="fa fa-linkedin fa-stack-1x fa-inverse"></i>
						</span>
					</a>
				</li>
				<li>
					<a href="/rss">
						<span class="fa-stack fa-lg">
							<i class="fa fa-circle fa-stack-2x"></i>
							<i class="fa fa-rss fa-stack-1x fa-inverse"></i>
						</span>
					</a>
				</li>
			</ul>
			<p class="copyright text-muted">Tristan Griffiths &copy; Copyright 2019. All Rights Reserved.</p>
		</div>
	</div>
</div>
	</footer>
	
	<!-- jQuery JS -->
<script src="//code.jquery.com/jquery-2.1.4.min.js"></script>

<!-- Bootstrap JS -->
<script src="//maxcdn.bootstrapcdn.com/bootstrap/3.3.5/js/bootstrap.min.js"></script>

<!-- Site -->
<script src="/assets/js/site.js"></script>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-65313416-1', 'auto');
  ga('send', 'pageview');
</script>
</body>
</html>